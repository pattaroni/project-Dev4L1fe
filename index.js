import{a as S,S as V,i as L,P as Y}from"./assets/vendor-WtVtfYKs.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();const z={BASE_URL:"https://sound-wave.b.goit.study/api",ENDPOINTS:{genres:()=>"/genres",artists:()=>"/artists",artistById:e=>`/artists/${e}`,artistByIdWithAlbums:e=>`/artists/${e}/albums`,feedbacks:()=>"/feedbacks"},PER_PAGE:8},x={ASC:"asc",DESC:"desc"},{BASE_URL:K,ENDPOINTS:E,PER_PAGE:q}=z;S.defaults.baseURL=K;const X=async()=>{const{data:e}=await S.get(E.genres());return e},F=async({page:e=1,genre:t,name:i,sortName:n}={})=>{const{data:r}=await S.get(E.artists(),{params:{page:e,limit:q,...!!t&&{genre:t},...!!i&&{name:i},...!!n&&{sortName:n}}}),a=r.totalArtists||0,o=Math.ceil(a/q),u=e>=o;return{artists:r.artists||[],isLastPage:u,totalItems:a,perPage:q}},J=async e=>{const{data:t}=await S.get(E.artistById(e));return t},Q=async e=>{const{data:t}=await S.get(E.artistByIdWithAlbums(e));return t},Z=async e=>{const{data:t}=await S.post(E.feedbacks(),e);return t},ee=async(e=1,t=10)=>{const{data:i}=await S.get(E.feedbacks(),{params:{page:e,limit:t}}),n=i.data||[],r=i.total||0,a=e>=Math.ceil(r/t);return{feedbacks:n,isLastPage:a}},s={artistsList:document.querySelector(".artists-list"),containerEL:document.querySelector(".container"),loader:document.querySelector(".loader"),artistsPagination:document.querySelector("#artists-pagination"),feedbackContainer:document.querySelector(".section-feedback .container"),genreSelect:document.querySelector("#genre-select"),sortSelect:document.querySelector("#sorting-select"),searchInput:document.querySelector(".filters-search-input"),searchBtn:document.querySelector(".filters-search-btn"),emptyResetBtn:document.querySelector(".empty-reset-btn"),toggleBtn:document.querySelector(".filters-toggle-btn"),filtersWrapper:document.querySelector(".filters-wrapper"),artistsLoader:document.querySelector(".artists-loader"),modalArtistLoader:document.querySelector(".modal-artist-loader"),filtersMenu:document.querySelector(".filters-form-container"),filtersMenuIcon:document.querySelector(".filters-menu-icon"),filtersMenuBtn:document.querySelector(".filters-menu-btn"),filtersSortingBtn:document.querySelector("[data-sorting-button"),filtersSortingIcon:document.querySelector(".filters-sorting-icon"),filtersSortingMenu:document.querySelector("#sorting-select"),filtersGenreBtn:document.querySelector("[data-genre-button"),filtersGenreIcon:document.querySelector(".filters-genre-icon"),filtersGenreMenu:document.querySelector("#genre-select"),filtersSortingList:document.querySelector("#sorting-select"),filtersGenreList:document.querySelector("#genre-select"),filtersResetBtn:document.querySelector(".filters-reset-btn"),filtersResetBtnMob:document.querySelector(".filters-reset-btn-mob"),headerEl:document.querySelector(".header"),artistsEl:document.querySelector(".section-artists")},k="/project-Dev4L1fe/assets/sprite-EY5VAFX4.svg";function te(e){localStorage.setItem("theme",e)}function se(){const e=localStorage.getItem("theme");e&&document.body.setAttribute("data-theme",e)}const re=(e="")=>CSS.supports("-webkit-line-clamp","2")&&CSS.supports("display","-webkit-box")?e:e.length>80?e.slice(0,80).trim()+"...":e,p={create(e){if(!e)return;let t=e.querySelector(".loader");return t||(e.insertAdjacentHTML("beforeend",'<span class="loader hidden"></span>'),t=e.querySelector(".loader")),{loaderEl:t,parent:e}},show({loaderEl:e,parent:t}={}){!e||!t||(e?.classList.remove("hidden"),t===document.querySelector(".artists-loader")&&(t.style.display="flex",e?.classList.remove("hidden")))},hide({loaderEl:e,parent:t}={}){!e||!t||(e?.classList.add("hidden"),t===document.querySelector(".artists-loader")&&(t.style.display="none",e?.classList.add("hidden")))}},ne=({page:e,visiblePages:t,itemsPerPage:i,totalItems:n}={})=>({totalItems:n,itemsPerPage:i,page:e,visiblePages:t,centerAlign:!0,usageStatistics:!1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:({type:r})=>`<a href="#" class="tui-page-btn tui-${r}"><svg class="pagination-${r==="next"?"right":"left"}-icon"><use href="${k}#${r==="next"?"right":"left"}-arrow-icon"></use></svg></a>`,disabledMoveButton:({type:r})=>`<span class="tui-page-btn tui-is-disabled tui-${r}"><svg class="icon-disabled pagination-${r==="next"?"right":"left"}-icon"><use href="${k}#${r==="next"?"right":"left"}-arrow-icon"></use></svg></span>`,moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}}),ie=e=>e<768?3:e>=768&&e<1440?4:5,ae=e=>{if(!e||isNaN(e))return"N/A";const t=Math.floor(e/1e3),i=Math.floor(t/60),n=t%60;return`${i}:${n.toString().padStart(2,"0")}`};function C(e){const t=e.el.querySelector(".swiper-button-prev"),i=e.el.querySelector(".swiper-button-next");e.isBeginning?t.classList.add("swiper-button-disabled"):t.classList.remove("swiper-button-disabled"),e.isEnd?i.classList.add("swiper-button-disabled"):i.classList.remove("swiper-button-disabled"),e.slides.length<=e.params.slidesPerView&&(t.classList.add("swiper-button-disabled"),i.classList.add("swiper-button-disabled"))}function oe(){const t=document.body.getAttribute("data-theme")==="dark"?"light":"dark";document.body.setAttribute("data-theme",t),te(t)}function ce(){window.addEventListener("scroll",()=>{const e=s.headerEl.offsetHeight,t=s.artistsEl.offsetTop;window.scrollY>=t-e?s.headerEl.style.transition="background-color 0.4s ease":s.headerEl.style.transition="none"})}function O(e){s.artistsList.innerHTML=e.map(t=>{const i=t.genres.map(r=>`<li class="genres-list-item">${r}</li>`).join(""),n=re(t.strBiographyEN);return`<li class="artists-list-item" data-id="${t._id}">
        <img class="artist-image" src="${t.strArtistThumb}" alt="${t.strArtist}" />
        <ul class="genres-list">${i}</ul>
        <h3 class="artist-name">${t.strArtist}</h3>
        <p class="artist-descr">${n}</p>
        <button type="button" class="artist-btn-learn-more">
          <span>Learn More</span>
          <span>
            <svg class="artist-learn-svg" width="14" height="14">
              <use href="${k}#next-icon"></use>
            </svg>
          </span>
        </button>
      </li>`}).join("")}const le=e=>{const t=document.querySelector(".section-feedback .container");if(!t)return console.error("Container not found");const i=`
    <div class="feedback-slider swiper">
      <div class="swiper-wrapper">
        ${e.map(o=>`
          <div class="swiper-slide">
            <div class="feedback-card">
              <div class="stars">${de(o.rating)}</div>
              <p class="comment">"${o.descr}"</p>
              <h3 class="comm-name">${o.name}</h3>
            </div>
          </div>
        `).join("")}
      </div>
      <div class="swiper-button-prev">
        <svg class="icon">
          <use href="${k}#left-arrow-icon"></use>

        </svg>
      </div>
      <div class="swiper-button-next">
        <svg class="icon">
          <use href="${k}#right-arrow-icon"></use>

        </svg>
      </div>
      <div class="custom-pagination">
        <span class="bullet bullet-left"></span>
        <span class="bullet bullet-middle"></span>
        <span class="bullet bullet-right"></span>
      </div>
    </div>
  `;t.insertAdjacentHTML("beforeend",i);const n=t.querySelector(".feedback-slider");if(!n)return console.error("Swiper container not found");const r=new V(n,{spaceBetween:30,slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init(o){a(o),C(o)},slideChange(o){a(o),C(o)}}});document.querySelector(".swiper-button-next")?.addEventListener("click",()=>{r.slideNext()}),document.querySelector(".swiper-button-prev")?.addEventListener("click",()=>{r.slidePrev()});function a(o){const u=o.slides.length,c=o.activeIndex,d=o.el.querySelector(".bullet-left"),g=o.el.querySelector(".bullet-middle"),f=o.el.querySelector(".bullet-right");!d||!g||!f||(d.classList.remove("active"),g.classList.remove("active"),f.classList.remove("active"),c===0?d.classList.add("active"):c===u-1?f.classList.add("active"):g.classList.add("active"))}};function de(e){const t=Math.round(e),i=5-t;return'<span class="stars">'+'<span class="fa fa-star checked"></span>'.repeat(t)+'<span class="fa fa-star"></span>'.repeat(i)+"</span>"}async function ue(e,t){const i=p.create(s.modalArtistLoader);p.show(i),s.modalArtistLoader.style.display="flex";try{const n=await J(e),r=await Q(e),a=Array.isArray(r.albumsList)?r.albumsList.filter(u=>u&&typeof u=="object"):[],o=n.genres?.map(u=>`<span class="genre-chip">${u}</span>`).join("")||"";t.innerHTML=`
      <h2 class="modal-title">${n.strArtist||"Unknown Artist"}</h2>

      <div class="modal-header">
        <img src="${n.strArtistThumb||""}" alt="${n.strArtist}" class="modal-img" />
        <div class="modal-info">
          <div class="modal-info-container">
          <div class="modal-info-group">
            <p><span>Years active</span> ${n.intFormedYear||"N/A"}-${n.intDiedYear||"present"}</p>
            <p><span>Sex</span> ${n.strGender||"N/A"}</p>
            </div>
            <div class="modal-info-group">
            <p><span>Members</span> ${n.intMembers||"N/A"}</p>
            <p><span>Country</span> ${n.strCountry||"N/A"}</p>
            </div>
          </div>
          <div><span>Biography</span><p>${n.strBiographyEN||"N/A"}</p></div>
          <div class="modal-genres">${o}</div>
        </div>
      </div>
      <h3 class="albums-heading">Albums</h3>
<div class="albums-container">
  ${a.length>0?a.map(u=>`
      <div class="album-card">
        <h4 class="album-title">${u.strAlbum||"Unknown Album"}</h4>
        <div class="album-tracks-header">
        <p>Track</p>
        <div class="track-info">
          <p>Time</p>
          <p>Link</p>
        </div>
        </div>
        <ul class="album-tracklist">
          ${u?.tracks?.length?u.tracks.map(c=>`
              <li class="album-track-item">
                <h5>${c.strTrack||"Track"}</h5>
                <div class="track-info">
                  <p>
                    ${ae(c.intDuration)}
                  </p>
                  <a class="track-video-link ${c.movie?"":"track-video-link-hidden"}" 
                      href="${c.movie||"#"}" target="_blank" rel="noopener noreferrer">
                    <svg class="track-video-icon icon-hidden">
                      <use href="${k}#youtube-icon"></use>
                    </svg>
                  </a>
                </div>
              </li>`).join(""):'<li class="album-track-item">No tracks available</li>'}
        </ul>
      </div>
    `).join(""):"<p>No albums found</p>"}
</div>`}catch(n){console.error("Modal render error:",n),t.innerHTML="<p>Error loading artist data</p>"}finally{p.hide(i),s.modalArtistLoader.style.display="none"}}const me=e=>{if(e?.length)return e.map(({genre:t})=>`<li><button class="filters-option" data-genre="${t}">${t}</button></li>`).join("")},A=document.getElementById("artist-modal"),_=A.querySelector(".modal-content-container"),fe=document.getElementById("close-modal");async function pe(e){A.classList.add("is-open"),document.body.style.overflow="hidden",await ue(e,_),document.addEventListener("keydown",j)}function $(){A.classList.remove("is-open"),document.body.style.overflow="auto",document.removeEventListener("keydown",j),_.innerHTML=""}function j(e){e.key==="Escape"&&$()}fe?.addEventListener("click",$);A.addEventListener("click",e=>{e.target===A&&$()});async function ge(){async function e(t=1){const i=p.create(s.artistsLoader);p.show(i),s.artistsLoader.style.display="flex";try{const n=await F({page:t});H(n.totalItems,n.perPage),O(n.artists)}catch(n){n.response?L.error({message:`Error ${n.response.status}: ${n.response.data}`}):L.error({message:`Error: ${n.message}`})}finally{p.hide(i),s.artistsLoader.style.display="none"}}await e(1)}async function ve(){const e=p.create(s.feedbackContainer);p.show(e);try{const{feedbacks:t}=await ee(1,10);if(!Array.isArray(t))throw new Error("Feedbacks is not an array");le(t)}catch(t){console.error("Feedback fetch error:",t)}finally{p.hide(e)}}let m={genre:"",sortName:"",name:"",page:1};async function be(){await ye(),he()}async function ye(){try{const e=await X(),t=me(e);s.genreSelect.insertAdjacentHTML("beforeend",t)}catch{L.error({message:"Failed to load genres"})}}function he(){s.filtersMenuBtn.addEventListener("click",()=>{s.filtersMenu.classList.toggle("is-open"),s.filtersMenuIcon.classList.toggle("is-open")}),s.filtersSortingBtn.addEventListener("click",()=>{s.filtersSortingMenu.classList.toggle("is-open"),s.filtersSortingIcon.classList.toggle("is-open"),s.filtersSortingBtn.classList.toggle("is-open")}),s.filtersGenreBtn.addEventListener("click",()=>{s.filtersGenreMenu.classList.toggle("is-open"),s.filtersGenreIcon.classList.toggle("is-open"),s.filtersGenreBtn.classList.toggle("is-open")}),s.filtersSortingList.addEventListener("click",e=>{const t=e.target;let i="";!t||t.nodeName!=="BUTTON"||(t.hasAttribute("data-filters-asc")&&(i=x.ASC),t.hasAttribute("data-filters-desc")&&(i=x.DESC),i!==m.sortName&&(m.sortName=i,m.page=1,b()))}),s.filtersGenreList.addEventListener("click",e=>{const t=e.target;if(!t||t.nodeName!=="BUTTON")return;const i=t.dataset.genre;!i||m.genre===i||(m.genre=i,m.page=1,b())}),s.searchBtn.addEventListener("click",e=>{e.preventDefault(),s.searchInput.value.trim()!==m.name&&(m.name=s.searchInput.value.trim(),m.page=1,b())}),s.searchInput.addEventListener("keydown",e=>{if(e.key==="Enter"){e.preventDefault();const t=s.searchInput.value.trim();if(t===m.name)return;s.filtersMenu.classList.remove("is-open"),m.name=t,m.page=1,b()}}),s.filtersResetBtn.addEventListener("click",()=>{s.searchInput.value="",m={genre:"",sortName:"",name:"",page:1},s.filtersWrapper?.classList?.remove("is-open"),s.filtersMenu.classList.remove("is-open"),s.filtersMenuIcon.classList.remove("is-open"),s.filtersSortingMenu.classList.remove("is-open"),s.filtersSortingIcon.classList.remove("is-open"),s.filtersSortingBtn.classList.remove("is-open"),s.filtersGenreMenu.classList.remove("is-open"),s.filtersGenreIcon.classList.remove("is-open"),s.filtersGenreBtn.classList.remove("is-open"),b()}),s.filtersResetBtnMob.addEventListener("click",()=>{s.searchInput.value="",m={genre:"",sortName:"",name:"",page:1},s.filtersWrapper?.classList?.remove("is-open"),s.filtersMenu.classList.remove("is-open"),s.filtersMenuIcon.classList.remove("is-open"),s.filtersSortingMenu.classList.remove("is-open"),s.filtersSortingIcon.classList.remove("is-open"),s.filtersSortingBtn.classList.remove("is-open"),s.filtersGenreMenu.classList.remove("is-open"),s.filtersGenreIcon.classList.remove("is-open"),s.filtersGenreBtn.classList.remove("is-open"),b()}),s.emptyResetBtn&&s.emptyResetBtn.addEventListener("click",()=>{s.genreSelect.value="",s.sortSelect.value="",s.searchInput.value="",m={genre:"",sortName:"",name:"",page:1},document.querySelector(".artists-empty-state").classList.add("is-hidden"),b()})}let G=null;async function b(){const e=p.create(s.artistsLoader);p.show(e);try{const t=await F(m);if(!t||!Array.isArray(t.artists))throw new Error("Invalid API response structure");t.artists.length===0?(s.artistsList.innerHTML="",document.querySelector(".artists-empty-state").classList.remove("is-hidden"),s.artistsPagination.classList.add("is-hidden")):(document.querySelector(".artists-empty-state").classList.add("is-hidden"),s.artistsPagination.classList.remove("is-hidden"),O(t.artists),H(t.totalItems,t.perPage))}catch{L.error({message:"Failed to load filtered artists"})}finally{p.hide(e),s.artistsLoader.style.display="none",document.querySelector(".artists-subtitle").scrollIntoView({behavior:"smooth"})}}function H(e,t){let i=window.innerWidth;G=new Y(s.artistsPagination,ne({page:m.page,visiblePages:ie(i),itemsPerPage:t,totalItems:e})),G.on("afterMove",n=>{m.page=n.page,b()})}const Le=()=>{s.artistsList.addEventListener("click",async e=>{const t=e.target.closest(".artist-btn-learn-more");if(t?.nodeName!=="BUTTON")return;const i=t.closest(".artists-list-item")?.dataset?.id;if(!i){L.error({message:"Unable to find this artist. Please try again later."});return}pe(i)})},M=document.getElementById("toTop");window.addEventListener("scroll",()=>{window.scrollY>600?M.classList.add("show"):M.classList.remove("show")});M.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const Se=document.querySelector(".burger-menu"),R=document.querySelector(".mobile-menu"),ke=document.querySelector(".mobile-menu-close"),B=document.querySelector(".overlay"),Ee=document.querySelectorAll(".nav-list-m a");function we(){R.classList.add("active"),B.classList.add("active"),document.body.classList.add("lock")}function I(){R.classList.remove("active"),B.classList.remove("active"),document.body.classList.remove("lock")}Se.addEventListener("click",we);ke.addEventListener("click",I);B.addEventListener("click",I);Ee.forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const i=this.getAttribute("href"),n=document.querySelector(i);n&&n.scrollIntoView({behavior:"smooth"}),I()})});function Ae(e,t={}){const i=t.max??5,n=t.scoreName??"rating";e.innerHTML="",e.classList.add("star-rating");let r=0;const a=document.createElement("input");a.type="hidden",a.name=n,a.value="0",e.appendChild(a);const o=[];for(let c=1;c<=i;c++){const d=document.createElement("button");d.type="button",d.setAttribute("aria-label",`${c} star${c>1?"s":""}`),d.dataset.value=String(c),e.appendChild(d),o.push(d)}function u(c){const d=Math.floor(c);o.forEach((g,f)=>{g.classList.remove("is-on","is-hover"),f<d&&g.classList.add("is-on")})}e.addEventListener("mousemove",c=>{const d=c.target.closest("button");if(!d)return;const g=Number(d.dataset.value);o.forEach(f=>f.classList.remove("is-hover"));for(let f=0;f<g;f++)o[f].classList.add("is-hover")}),e.addEventListener("mouseleave",()=>{o.forEach(c=>c.classList.remove("is-hover")),u(r)}),e.addEventListener("click",c=>{const d=c.target.closest("button");if(!d)return;r=Number(d.dataset.value),a.value=String(r),u(r)}),u(r)}function qe({name:e,rating:t,descr:i}){const n={},r=(e??"").trim();(r.length<2||r.length>16)&&(n.name="Name must be 2-16 characters.");const a=Number(t);(!Number.isFinite(a)||a<1||a>5)&&(n.rating="Rating must be between 1 and 5.");const o=(i??"").trim();return(o.length<10||o.length>512)&&(n.descr="Message must be 10-512 characters."),n}function D(){const e=document.getElementById("feedback-modal");if(!e)return;const t=e.querySelector(".modal__close"),i=e.querySelector(".modal__backdrop"),n=e.querySelector("#fb-name"),r=e.querySelector(".modal__form"),a=e.querySelector("#star-rating"),o='#open-modal, [data-open="feedback-modal"]';let u=!1;const c=()=>{r.querySelectorAll(".form-error").forEach(l=>l.remove()),r.querySelectorAll(".field-invalid").forEach(l=>l.classList.remove("field-invalid")),r.querySelectorAll('[aria-invalid="true"]').forEach(l=>l.removeAttribute("aria-invalid"))},d=(l,y)=>{l?.classList?.add("field-invalid"),l?.insertAdjacentHTML("beforeend",`<div class="form-error">${y}</div>`)},g=()=>document.body.style.overflow="hidden",f=()=>document.body.style.overflow="auto",U=()=>{e.classList.add("active"),g(),setTimeout(()=>n?.focus(),0),!u&&a&&(Ae(a,{max:5}),u=!0)},W=()=>{if(!a)return;const l=a.querySelector('input[name="rating"]');l&&(l.value="0"),a.querySelectorAll("button").forEach(y=>y.classList.remove("is-on","is-half","is-hover","is-hover-half"))},w=()=>{e.classList.remove("active"),f()};document.addEventListener("click",l=>{l.target.closest(o)&&(l.preventDefault(),U())}),t?.addEventListener("click",w),i?.addEventListener("click",w),document.addEventListener("keydown",l=>{l.key==="Escape"&&e.classList.contains("active")&&w()}),t&&!("disabled"in t)&&(t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),w())})),r?.addEventListener("submit",async l=>{l.preventDefault();const y=new FormData(r),N={name:(y.get("name")||"").toString().trim(),rating:Number(a?.querySelector('input[name="rating"]')?.value||"0"),descr:(y.get("message")||"").toString().trim()};c();const h=qe(N);if(Object.keys(h).length){if(h.name){const v=r.querySelector(".form__group_1");v?.querySelector("input")?.setAttribute("aria-invalid","true"),d(v,h.name)}if(h.descr){const v=r.querySelector(".form__group_2");v?.querySelector("textarea")?.setAttribute("aria-invalid","true"),d(v,h.descr)}h.rating&&a?.insertAdjacentHTML("afterend",`<div class="form-error">${h.rating}</div>`);return}const T=r.querySelector(".fb-modal-btn");T?.setAttribute("disabled","true");try{await Z(N),L.success({title:"Success",message:"Thank you for your feedback!",position:"topRight"}),r.reset(),W(),c(),w()}catch(v){const P=v?.response?.data?.message||v?.message||"Something went wrong. Try again.";L.error({title:"Error",message:P,position:"topRight"}),r.insertAdjacentHTML("afterbegin",`<div class="form-error">${P}</div>`)}finally{T?.removeAttribute("disabled")}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):D();se();ce();ge();ve();be();Le();document.querySelectorAll(".theme-toggle").forEach(e=>{e.addEventListener("click",oe)});
//# sourceMappingURL=index.js.map
